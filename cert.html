<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>藏玉证书</title>
    <link rel="stylesheet" href="css/my-app.css">
    <!-- Path to jquary Library JS-->
    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="js/template-native.js"></script>
    <!-- Path to Framework7 Library JS-->
    <script type="text/javascript" src="dist/js/framework7.min.js"></script>
    <!-- Banner-->
    <link rel="stylesheet" href="swiper/swiper.min.css">
    <style>
        * {
            margin: 0px;
            padding: 0px;
            font-size: 14px;
            color: #666;
        }

        .container {
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
        }

        /* 轮播图 */
        .swiper-container {
            position: relative;
            width: 100%;
            overflow: hidden;
            margin: 0px auto;
        }

        .swiper-slide {
            width: 100%;
            position: relative;
            height: 100%;
            text-align: center;
            overflow: hidden;
            font-size: 18px;
            background: #fff;
            display: -webkit-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            -webkit-justify-content: center;
            justify-content: center;
            -webkit-box-align: center;
            -ms-flex-align: center;
            -webkit-align-items: center;
            align-items: center;
        }


        .swiper-slide,
        .swiper-slide a .swiper-slide .img-dv,
        .swiper-slide .img-dv a {
            width: 100%;
            height: 100%;
        }

        .swiper-slide a img,
        .swiper-slide .img-dv a img {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }


        .top {
            display: flex;
            flex-direction: column;
            position: relative;
            align-items: center;
            margin-top: 22px;
        }

        .top .hr {
            width: 2em;
            margin-top: 7px;
            height: 1px;
            background: #e9e9e9;
            border: none;
            margin-bottom: 13px;
        }

        .container .line {
            height: 13px;
            border: none;
            width: 100%;
            background: #f7f7f7;
        }

        .detail {
            width: 92%;
            margin-left: 4%;
        }

        .detail tbody tr {
            height: 40px;
        }

        .detail table {
            width: 100%;
        }

        .detail thead tr {
            text-align: left;
            height: 45px;
        }

        .detail thead tr td {
            padding-left: 0%;
        }


        .detail tbody tr td {
            border-top: 1px dashed #dcdde3;
        }

        .detail tbody tr td:first-child {
            color: #b2b2b2;
            width: 30%;
            padding-left: 0%;
        }

        .author {
            display: flex;
            flex-direction: column;
            width: 92%;
            margin: 4%;
            align-items: center;
        }

        .author .detail {
            width: 100%;
            /* margin-left: 4%; */
            margin-left: 0%;
        }

        .author .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #666;
            margin-top: 15px;
            border: none;
        }

        .author .avatar::after {
            display: none;
        }

        .author .name {
            margin-top: 7px;
        }

        .author .content {
            color: #b2b2b2;
            margin-top: 11px;
        }

        .author .img-dv img {
            background: #f5f4f4;
            margin-top: 12px;
            position: relative;
            /* margin-left: 4%; */
        }

        /* .author img:after {
            content: attr(time);
            position: absolute;
            text-align: center;
            width: 82px;
            height: 19px;
            background: rgba(255, 255, 255, 1);
            border-radius: 2px;
            bottom: 9px;
            right: 11px;
        } */

        /* 图片放大 */
        .clearfix::before,
        .clearfix::after {
            display: block;
            content: '';
            visibility: hidden;
            height: 100%;
            clear: both;
        }

        body {
            padding-top: 2%;
        }

        .my-gallery {
            width: 100%;
            margin: 0 auto;
        }

        .my-gallery .img-dv {
            width: 100%;
        }

        .my-gallery .img-dv a {
            display: block;
            width: 100%;
            text-align: center
        }

        .my-gallery .img-dv a img {
            width: 100%;
        }

        /* 没有数据 */
        .no_cert {
            width: 100%;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .no_cert img {
            width: 60%;
            margin-top: 10%;
            margin-bottom: 5%;
        }
    </style>

</head>

<body>

    <div class="views">
        <!-- Content-->
        <div class="container">
            <div class="buy_mess_div"></div>
            <div class="default_page_div"></div>
        </div>
        <!-- Bottom Tabbar-->
        <div class="cangyu_bbs_tabber" id="bottom">
            <a href="javascript:void(0)" class="close"></a>
            <a href="http://a.app.qq.com/o/simple.jsp?pkgname=icangyu.jade" target="_self" class="download"
                rel="nofollow">
                <div class="logo"></div>
                <div class="banner-label">
                    <p class="tb" data-node="appName">下载APP</p>
                    <p class="title-sub">参与藏玉互动</p>
                </div>
                <div class="open">立即打开</div>
            </a>
        </div>
    </div>

    <script type="text/javascript" src="js/config.js"></script>

    <script>
        $(".close").click(function () {
            $(".cangyu_bbs_tabber").hide();
        });
    </script>


    <!-- <script type="text/html" id="default_page"> -->
    <div class="no_cert" id="default_page">
        <img src="img/no_cert.jpg" alt="">
        没有证书数据
    </div>
    <!-- </script> -->
    <!-- 页面信息 -->
    <div class="container" id="buy_mess">
        <!-- 顶部轮播图 -->
        <div class="top_img" id="top_img"></div>
        <!-- <div class="swiper-container" id="swiper-container">
            <div class="swiper-wrapper" id="swiper_img">
            </div>
        </div> -->
        <!-- 标题 -->
        <div class="top">
            <div>商品详情</div>
            <div class="hr"></div>
        </div>
        <div class="line"></div>
        <!-- 商品参数 -->
        <div class="detail">
            <table border="0" cellpadding="0" cellspacing="0">
                <thead>
                    <tr>
                        <td colspan=2>
                            商品参数
                        </td>
                    </tr>
                </thead>
                <tbody id="detail_tr">

                </tbody>
            </table>
        </div>
        <div class="line"></div>
        <!-- 作者信息 -->
        <div class="author_main" id="author_main">
            <div class="author" id="author">

            </div>
            <div class="line"></div>
        </div>
        <!-- 制作过程 -->
        <div class="author">
            <div class="my-gallery" id="detail"></div>
        </div>
    </div>

    <script type="text/javascript" src="swiper/swiper.min.js"></script>
    <script>
        var square_id = HttpHelper.getQuery('item_id');
        var bar = HttpHelper.getQuery('bar');
        if (bar) {
            document.getElementById("bottom").style.display = "none";
        }
        //证书详情
        $.getJSON(`${CYHOST}/icyApi/certificateDetails?id=${square_id}`, function (data) {
            // $.getJSON(`http://testicy.icangyu.com/icyApi/certificateDetails?id=${square_id}`, function (data) {
            console.log(data);
            if (data.result == 100) {
                document.getElementById("default_page").style.display = "none";
                document.getElementById("buy_mess").style.display = "flex";
                var cert = data.data;
                console.log(cert.carousel)
                // 轮播图
                var top_img = "";
                var width = document.body.clientWidth;
                var height = parseInt(width / 16 * 9);
                // for (var i = 0; i < cert.carousel.length; i++) {
                top_img = "<a href='" + cert.carousel[0].file_path +
                    "'  data-size='1920x1080'>" + "<img style='width:100%;' src='" + cert.carousel[0].file_path +
                    "'>" +
                    "</a>";
                console.log()
                // }
                // document.getElementById("swiper-container").style.width = width + "px";
                // document.getElementById("swiper-container").style.height = height + "px";
                // document.getElementById("swiper_img").style.height = height + "px";
                document.getElementById("top_img").innerHTML = top_img;
                document.getElementById("top_img").style.width = width + "px";
                console.log(width, height);
                // 商品详情
                var detail_td = "";
                for (var j = 0; j < cert.attributes.length; j++) {
                    detail_td += "<tr>" + "<td>" + cert.attributes[j].title + "</td>" + "<td>" + cert
                        .attributes[j].value + "</td>" + "</tr>"
                }
                document.getElementById("detail_tr").innerHTML = detail_td;
                // 作者信息
                if (cert.author.name) {
                    var author = "<div class='detail'>作者简介</div>" + "<img class='avatar' src='" + cert.author
                        .avatar + "'>" + "<div class='name'>" + cert.author.name + "</div>" +
                        "<div class='content'>" + cert.author.content + "</div>"
                    document.getElementById("author").innerHTML = author;
                } else {
                    document.getElementById("author_main").style.display = "none";
                }

                // 制作过程
                var progress = "";
                for (var k = 0; k < cert.album.length; k++) {
                    progress += "<div class='img-dv'>" + "<a href='" + cert.album[k].file_path +
                        "'  data-size='1920x1080'>" + "<img src='" + cert.album[k].file_path + "'>" + "</a>" +
                        "</div>"
                }
                document.getElementById("detail").innerHTML = progress;
                // swiper滑动
                var swiper = new Swiper('.swiper-container', {
                    pagination: '.swiper-pagination',
                    paginationClickable: true,
                    observer: true, //修改swiper自己或子元素时，自动初始化swiper
                    observeParents: true, //修改swiper的父元素时，自动初始化swiper
                    loop: true
                });
            } else {
                document.getElementById("buy_mess").style.display = "none";
                document.getElementById("default_page").style.display = "flex";

            }
        })
    </script>
</body>

</html>